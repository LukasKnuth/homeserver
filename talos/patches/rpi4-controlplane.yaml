# A JSON patch (in YAML) https://jsonpatch.com/

# Hostname
- op: replace
  path: /machine/network/hostname
  value: "talos-controlplane"

# Static IP interface
- op: add
  path: /machine/network/interfaces
  value:
    # This is "enx<HW_ADDR>" where HW_ADDR is the MAC address of the interface without colons
    # This means that it's different for _every_ Raspberry Pi Hardware device!
    - interface: enxe45f012b8369
      dhcp: false
      addresses: ["192.168.107.3/24"]

# Machine labels
- op: add
  path: /machine/nodeLabels
  value:
    node.kubernetes.io/instance-type: "rpi4.4gb.arm64"
    topology.kubernetes.io/region: cologne
    topology.kubernetes.io/zone: single

# Allow workloads the be scheduled here (since it's a single-instance cluster)
- op: replace
  path: /cluster/allowSchedulingOnControlPlanes
  value: true
